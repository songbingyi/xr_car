<div class="page edit-order-page">
    <div class="scroll-page">
        <!--<div class="order-bar">
            <span class="left">订单号：{{detail?.service_order_no}}</span>
            <span class="right">下单时间：{{detail?.service_order_date}}</span>
        </div>
        <div class="status-bar">
            <p>订单状态：{{detail?.service_order_status_info.service_order_status_name}}</p>
            <p class="text-primary" [hidden]="!detail?.service_order_comment">原因：{{detail?.service_order_comment}}</p>
        </div>-->
        <div class="edit-order" *ngIf="detail?.service_order_product_info?.service_type_info?.service_type_key === 'service_driving_license'">
            <div class="weui-cells__title">一、驾照信息</div>
            <div class="weui-cells ">
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>驾照归属地</p>
                    </div>
                    <div class="weui-cell__ft">
                        <span>{{getServiceProductSpecTypeInfoByKey('region').service_order_product_extend_value}}</span>
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>驾照类型</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{getServiceProductSpecTypeInfoByKey('driving_license_type').service_order_product_extend_value}}
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>审验费用</p>
                    </div>
                    <div class="weui-cell__ft"><span class="text-warning">{{detail?.total}}</span></div>
                </div>
                <div class="weui-cell weui-cell-more-special">
                    <div class="weui-cell__bd">
                        <!--<p>上传图片</p>-->
                        <div class="weui-cells__title">二、资料图片</div>
                    </div>
                </div>
                <div class="images-container">

                    <table class="table-container">
                        <tr>
                            <td>
                                <div class="image aspect-ratio" data-ratio="1:1"
                                     [style.background-image]="'url(' + detail?.service_order_product_info.service_order_product_image_list[0]?.thumb + ')'">
                                    <span (click)="choose('a')"
                                          *ngIf="detail?.service_order_status_info.service_order_status_id==='22'">修改</span>
                                </div>
                                <span>驾照正副本</span>
                            </td>
                            <td>
                                <div class="image aspect-ratio" data-ratio="1:1"
                                     [style.background-image]="'url(' + detail?.service_order_product_info.service_order_product_image_list[1]?.thumb + ')'">
                                    <span (click)="choose('b')"
                                          *ngIf="detail?.service_order_status_info.service_order_status_id==='22'">修改</span>
                                </div>
                                <span>人靠白墙半身照</span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="image uploaded img-license aspect-ratio" data-ratio="1:1"
                                     [style.background-image]="'url(' + detail?.service_order_product_info.service_order_product_image_list[2]?.thumb + ')'">
                                    <span (click)="choose('c')"
                                          *ngIf="detail?.service_order_status_info.service_order_status_id==='22'">修改</span>
                                </div>
                                <span>身份证正面</span>
                            </td>
                            <td>
                                <div class="image aspect-ratio" data-ratio="1:1"
                                     [style.background-image]="'url(' + detail?.service_order_product_info.service_order_product_image_list[3]?.thumb + ')'">
                                    <span (click)="choose('d')"
                                          *ngIf="detail?.service_order_status_info.service_order_status_id==='22'">修改</span>
                                </div>
                                <span>身份证反面</span>
                            </td>
                        </tr>
                    </table>
                </div>
                <!--<div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>应支付</p>
                    </div>
                    <div class="weui-cell__ft"><span class="text-warning">￥{{detail?.total}}</span></div>
                </div>
                <div class="weui-cell weui-cell-special">
                    <div class="weui-cell__bd">
                        <p>支付方式</p>
                    </div>
                    <div class="weui-cell__ft">
                        <img src="/assets/images/icon/wxpay.png" width="133px" height="25px" />
                        <p>（暂不支持其他支付方式）</p>
                    </div>
                </div>-->
            </div>
        </div>

        <div class="edit-order" *ngIf="detail?.service_order_product_info?.service_type_info?.service_type_key === 'service_operation_certificate'">
            <div class="weui-cells__title">一、车辆信息</div>
            <!--<div class="weui-cells weui-cells_checkbox">
                <label class="weui-cell weui-check__label" for="car">
                    <div class="weui-cell__hd">
                        <input class="weui-check" name="car" type="radio" id="car" checked="checked">
                        <i class="weui-icon-checked"></i>
                    </div>
                    <div class="weui-cell__bd">
                        <span>{{getServiceProductSpecTypeInfoByKey('car_property').service_order_product_extend_value}}</span>
                        <span>{{getServiceProductSpecTypeInfoByKey('car_type').service_order_product_extend_value}}</span>
                        <span>{{getServiceProductSpecTypeInfoByKey('car_plate_no').service_order_product_extend_value | uppercase | plateFormat}}</span>
                    </div>
                </label>
            </div>-->


            <div class="weui-cells weui-cells_checkbox">
                <label class="weui-cell weui-check__label" for="car">
                    <div class="weui-cell__hd">
                        <input class="weui-check" name="car" type="radio" id="car" checked="checked">
                        <i class="weui-icon-checked"></i>
                    </div>
                    <div class="weui-cell__bd">
                        <span>{{getServiceProductSpecTypeInfoByKey('car_property').service_order_product_extend_value}}</span>
                        <span>{{getServiceProductSpecTypeInfoByKey('car_type').service_order_product_extend_value}}</span>
                        <span>{{getServiceProductSpecTypeInfoByKey('car_plate_no').service_order_product_extend_value | uppercase | plateFormat}}</span>
                    </div>
                </label>
            </div>

            <div class="weui-cell weui-cell-more-special">
                <div class="weui-cell__bd">
                    <div class="weui-cells__title">二、审验信息</div>
                </div>
            </div>
            <div class="weui-cells ">
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>审验城市</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{getServiceProductSpecTypeInfoByKey('region').service_order_product_extend_value}}
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>审验站点</p>
                    </div>
                    <div class="weui-cell__ft">
                        <span class="for-station">{{getServiceProductSpecTypeInfoByKey('site').service_order_product_extend_value}}</span>
                    </div>
                </div>
                <div class="weui-cell weui-cell-small"
                     *ngIf="detail?.service_order_status_info.service_order_status_id!=='32'">
                    <div class="weui-cell__bd">
                        <p>审验时间</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{getServiceProductSpecTypeInfoByKey('service_date').service_order_product_extend_value}}
                    </div>
                </div>
                <a class="weui-cell weui-cell_access" href="javascript:;" (click)="showDateTypeBox()" *ngIf="detail?.service_order_status_info.service_order_status_id==='32'">
                    <div class="weui-cell__bd">
                        <p>审验时间</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{result.date.service_date ? (result.date.service_date | date:'MM.dd') : '请选择审验时间'}}
                    </div>
                </a>
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>审验费用</p>
                    </div>
                    <div class="weui-cell__ft"><span class="text-warning">{{detail?.total}}</span></div>
                </div>
                <!--<div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>上传图片</p>
                    </div>
                </div>-->
                <div class="weui-cell weui-cell-more-special">
                    <div class="weui-cell__bd">
                        <div class="weui-cells__title">三、资料图片</div>
                    </div>
                </div>
                <div class="images-container">
                    <table class="table-container">
                        <tr>
                            <td>
                                <div class="image aspect-ratio" data-ratio="1:1"
                                     [style.background-image]="'url(' + detail?.service_order_product_info.service_order_product_image_list[0].thumb + ')'">
                                    <span (click)="choose('a')"
                                          *ngIf="detail?.service_order_status_info.service_order_status_id==='22'">修改</span>
                                </div>
                                <span>营运证</span>
                            </td>
                            <td>
                                <div class="image aspect-ratio" data-ratio="1:1"
                                     [style.background-image]="'url(' + detail?.service_order_product_info.service_order_product_image_list[1]?.thumb + ')'">
                                    <span (click)="choose('b')"
                                          *ngIf="detail?.service_order_status_info.service_order_status_id==='22'">修改</span>
                                </div>
                                <span>行驶证</span>
                            </td>
                        </tr>
                    </table>
                </div>
                <!--<div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>应支付</p>
                    </div>
                    <div class="weui-cell__ft"><span class="text-warning">￥{{detail?.total}}</span></div>
                </div>
                <div class="weui-cell weui-cell-special">
                    <div class="weui-cell__bd">
                        <p>支付方式</p>
                    </div>
                    <div class="weui-cell__ft">
                        <img src="/assets/images/icon/wxpay.png" width="133px" height="25px" />
                        <p>（暂不支持其他支付方式）</p>
                    </div>
                </div>-->
            </div>
        </div>

        <div class="edit-order" *ngIf="detail?.service_order_product_info?.service_type_info?.service_type_key === 'service_audit_car'">
            <div class="weui-cells__title">一、车辆信息</div>

            <div class="weui-cells weui-cells_checkbox">
                <label class="weui-cell weui-check__label" for="audit_car">
                    <div class="weui-cell__hd">
                        <input class="weui-check" name="car" type="radio" id="audit_car" checked="checked">
                        <i class="weui-icon-checked"></i>
                    </div>
                    <div class="weui-cell__bd">
                        <span>{{getServiceProductSpecTypeInfoByKey('car_property').service_order_product_extend_value}}</span>
                        <span>{{getServiceProductSpecTypeInfoByKey('car_type').service_order_product_extend_value}}</span>
                        <span>{{getServiceProductSpecTypeInfoByKey('car_plate_no').service_order_product_extend_value | uppercase | plateFormat}}</span>
                    </div>
                </label>
            </div>

            <div class="weui-cell weui-cell-more-special">
                <div class="weui-cell__bd">
                    <div class="weui-cells__title">二、附加信息</div>
                </div>
            </div>
            <div class="weui-cells ">
                <div class="weui-cell special-cell">
                    <div class="weui-cell__bd">
                        <p>车辆选项</p>
                    </div>
                    <div class="weui-cell__ft"><span>{{getServiceProductSpecTypeInfoByKey('car_type').service_order_product_extend_value}}</span>
                    </div>
                </div>
            </div>

            <div class="weui-cell weui-cell-more-special">
                <div class="weui-cell__bd">
                    <div class="weui-cells__title">三、审验信息</div>
                </div>
            </div>
            <div class="weui-cells ">
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>审车城市</p>
                    </div>
                    <div class="weui-cell__ft">
                        <span>{{getServiceProductSpecTypeInfoByKey('region').service_order_product_extend_value}}</span>
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>审车站点</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{getServiceProductSpecTypeInfoByKey('site').service_order_product_extend_value}}
                    </div>
                </div>
                <div class="weui-cell" *ngIf="detail?.service_order_status_info.service_order_status_id!=='32'">
                    <div class="weui-cell__bd">
                        <p>审车时间</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{getServiceProductSpecTypeInfoByKey('service_date').service_order_product_extend_value}}
                    </div>
                </div>
                <a class="weui-cell weui-cell_access" href="javascript:;" (click)="showDateTypeBox()" *ngIf="detail?.service_order_status_info.service_order_status_id==='32'">
                    <div class="weui-cell__bd">
                        <p>审车时间</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{result.date.service_date ? (result.date.service_date | date:'MM.dd') : '请选择审验时间'}}
                    </div>
                </a>
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>审车费用</p>
                    </div>
                    <div class="weui-cell__ft">
                        <span class="text-warning">{{detail?.total}}</span>
                    </div>
                </div>
                <!--<div class="weui-cell weui-cell-small"
                     *ngIf="detail?.service_order_status_info.service_order_status_id!=='32'">
                    <div class="weui-cell__bd">
                        <p>预约时间</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{getServiceProductSpecTypeInfoByKey('service_date').service_order_product_extend_value}}
                    </div>
                </div>-->
                <!--<a class="weui-cell weui-cell_access" href="javascript:;" (click)="showDateTypeBox()"
                   *ngIf="detail?.service_order_status_info.service_order_status_id==='32'">
                    <div class="weui-cell__bd">
                        <p>审验时间</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{result.date.service_date ? (result.date.service_date | date:'MM.dd') : '请选择审验时间'}}
                    </div>
                </a>-->
                <!--<div class="weui-cell no-border weui-cell-small">
                    <div class="weui-cell__bd">
                        <p>检测地点</p>
                    </div>
                    <div class="weui-cell__ft">
                        {{getServiceProductSpecTypeInfoByKey('region').service_order_product_extend_value}}
                        {{getServiceProductSpecTypeInfoByKey('site').service_order_product_extend_value}}
                    </div>
                </div>-->
                <!--<div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>上传图片</p>
                    </div>
                </div>-->
                <div class="weui-cell weui-cell-more-special">
                    <div class="weui-cell__bd">
                        <div class="weui-cells__title">四、资料图片</div>
                    </div>
                </div>
                <div class="images-container" *ngIf="detail?.service_order_product_info.service_order_product_image_list.length===1">
                    <img class="single-img" [src]="detail?.service_order_product_info.service_order_product_image_list[0].thumb" style="height:150px;width: 250px;"/>
                    <span (click)="choose('a')" *ngIf="detail?.service_order_status_info.service_order_status_id==='22'">修改</span>
                </div>
                <div class="images-container" *ngIf="detail?.service_order_product_info.service_order_product_image_list.length===2">
                    <table class="table-container">
                        <tr>
                            <td>
                                <div class="image aspect-ratio" data-ratio="1:1" [style.background-image]="'url(' + detail?.service_order_product_info.service_order_product_image_list[0].thumb + ')'">
                                    <span (click)="choose('a')" *ngIf="detail?.service_order_status_info.service_order_status_id==='22'">修改</span>
                                </div>
                            </td>
                            <td>
                                <div class="image aspect-ratio" data-ratio="1:1" [style.background-image]="'url(' + detail?.service_order_product_info.service_order_product_image_list[1]?.thumb + ')'">
                                    <span (click)="choose('b')" *ngIf="detail?.service_order_status_info.service_order_status_id==='22'">修改</span>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
                <!--<div class="weui-cell">
                    <div class="weui-cell__bd">
                        <p>应支付</p>
                    </div>
                    <div class="weui-cell__ft"><span class="text-warning">￥{{detail?.total}}</span></div>
                </div>
                <div class="weui-cell weui-cell-special">
                    <div class="weui-cell__bd">
                        <p>支付方式</p>
                    </div>
                    <div class="weui-cell__ft">
                        <img src="/assets/images/icon/wxpay.png" width="133px" height="25px" />
                        <p>（暂不支持其他支付方式）</p>
                    </div>
                </div>-->
            </div>
        </div>

        <a href="javascript:;" class="weui-btn weui-btn_passive weui-btn_primary full-width-btn-with-padding" (click)="editOrder(detail?.service_order_id)" *ngIf="detail?.service_order_status_info.service_order_status_id==='32' || detail?.service_order_status_info.service_order_status_id==='22'">确认提交</a>

    </div>
    <!--<a href="javascript:;" class="weui-btn weui-btn_primary full-width-btn with-no-radius" (click)="payOrder(detail?.service_order_id)" *ngIf="detail?.service_order_status_info.is_pay">付款</a>-->

    <div class="" [hidden]="!showDateType">
        <div class="weui-mask weui-animate-fade-in"></div>
        <div class="weui-picker weui-animate-slide-up">
            <div class="weui-picker__hd">
                <a href="javascript:;" data-action="cancel" class="weui-picker__action" (click)="cancelTypeBox()">取消</a>
                <a href="javascript:;" data-action="select" class="weui-picker__action" (click)="selectDateType()">确定</a>
            </div>
            <div class="weui-picker__bd">
                <div class="weui-cells weui-cells_radio">
                    <label class="weui-cell weui-check__label" for="date-{{date.service_date_id}}" *ngFor="let date of dates; index as index">
                        <div class="weui-cell__bd">
                            <p>{{date.service_date | date:'MM.dd'}}</p>
                        </div>
                        <div class="weui-cell__ft">
                            <input type="radio" class="weui-check" [(ngModel)]="selectedDate" [value]="date" name="date" id="date-{{date.service_date_id}}">
                            <span class="weui-icon-checked"></span>
                        </div>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <div class="error-bar" [hidden]="!errorMessage">
        <p>{{errorMessage}}</p>
    </div>

</div>
